#!/bin/sh

NOTIFICATION_ID=1
DELTA=5

# If the second argument is provided, use it as server.
if [ -n "$2" ]; then
    DELTA="$2"
fi

# Send notification with status of the device.
# It has specific ID so can be replaced.
send_notification() {
    gdbus call \
    --session \
    --dest org.freedesktop.Notifications \
    --object-path /org/freedesktop/Notifications \
    --method org.freedesktop.Notifications.Notify \
    changevolume \
    "$NOTIFICATION_ID" \
    gtk-dialog-info \
    Volume \
    "Currently $(pamixer --get-volume-human)" \
    [] \
    {} \
    4000 > /dev/null
}

case "$1" in
    inc) pamixer -i "$DELTA" ;;
    dec) pamixer -d "$DELTA" ;;
    toggle) pamixer -t ;;
    *) exit 1 ;;
esac

send_notification
